# M1 åå¤§è­¦è¨Šæ¯”å°å¡ - è¦–è¦ºåŒ–æ¨¡çµ„æ›´æ–°å ±å‘Š

## ğŸ“‹ æ›´æ–°æ¦‚è¿°

åŸºæ–¼æ‚¨æä¾›çš„ **M1.fig è¨­è¨ˆæª”è¦æ ¼æ›¸**ï¼Œæˆ‘å·²ç¶“æˆåŠŸæ›´æ–°äº†è¦–è¦ºåŒ–æ¨¡çµ„ï¼Œå¯¦ç¾äº†å®Œæ•´çš„è¨­è¨ˆç³»çµ±å’Œ XAI è¦–è¦ºåŒ–åŠŸèƒ½ã€‚

---

## ğŸ¯ å¯¦ç¾çš„åŠŸèƒ½

### 1. Design Tokens è¨­è¨ˆè®Šæ•¸ç³»çµ± âœ…

#### Color Tokens
```python
COLORS = {
    'success': '#4CAF50',      # æ­£å¸¸è€åŒ–
    'warning': '#FF9800',      # è­¦è¨Šå¾µå…†
    'info': '#2196F3',         # è³‡è¨Šæç¤º
    'confidence': '#1976D2',    # AI ä¿¡å¿ƒåº¦
    'text_primary': '#212121',   # ä¸»è¦æ–‡å­—
    'text_secondary': '#666666', # æ¬¡è¦æ–‡å­—
    'text_on_color': '#FFFFFF',  # è‰²å¡Šä¸Šæ–‡å­—
    'bg_normal': '#E8F5E9',     # æ­£å¸¸è€åŒ–èƒŒæ™¯
    'bg_warning': '#FFF3E0',    # è­¦è¨Šå¾µå…†èƒŒæ™¯
    'bg_card': '#FFFFFF',       # å¡ç‰‡èƒŒæ™¯
    'bg_subtle': '#F5F5F5',     # è¼”åŠ©èƒŒæ™¯
}
```

#### Typography Tokens
```python
TYPOGRAPHY = {
    'text_xs': '12px',     # æ¨™è¨»æ–‡å­—
    'text_sm': '14px',     # è¼”åŠ©æ–‡å­—
    'text_base': '16px',   # å…§æ–‡
    'text_lg': '18px',     # å‰¯æ¨™é¡Œ
    'text_xl': '20px',     # æ¨™é¡Œ
}
```

#### Spacing Tokens
```python
SPACING = {
    'xs': '4px',
    'sm': '8px',
    'md': '12px',
    'lg': '16px',
    'xl': '20px',
    '2xl': '24px',
}
```

### 2. Component Library å…ƒä»¶åº« âœ…

#### Atoms åŸå­å…ƒä»¶
- **XAI Confidence Badge** - ä¿¡å¿ƒåº¦æ¨™ç±¤
- **Warning Level Indicator** - è­¦è¨Šç­‰ç´šæŒ‡ç¤º
- **Action Button** - è¡Œå‹•æŒ‰éˆ•

#### Molecules åˆ†å­å…ƒä»¶
- **Comparison Card** - æ¯”å°å¡ç‰‡
- **AI Reasoning Path** - AI æ¨ç†è·¯å¾‘
- **Confidence Meter** - ä¿¡å¿ƒåº¦é‡è¡¨

#### Organisms çµ„ç¹”å…ƒä»¶
- **Flex Message Bubble** - Flex è¨Šæ¯æ°£æ³¡
- **Carousel Container** - è¼ªæ’­å®¹å™¨

### 3. XAI è¦–è¦ºåŒ–åŠŸèƒ½ âœ…

#### ä¿¡å¿ƒåº¦è¦–è¦ºåŒ–
- å‹•æ…‹é¡è‰²è®ŠåŒ– (é«˜/ä¸­/ä½ä¿¡å¿ƒåº¦)
- é€²åº¦æ¢é¡¯ç¤º
- ç™¾åˆ†æ¯”æ¨™ç¤º

#### æ¯”å°å¡ç‰‡ç³»çµ±
- æ­£å¸¸è€åŒ– vs å¤±æ™ºè­¦è¨Š
- èªç¾©åŒ–é¡è‰²ç·¨ç¢¼
- åœ–æ¨™åŒ–è¡¨ç¤º

#### æ¨ç†è·¯å¾‘é¡¯ç¤º
- æ­¥é©ŸåŒ–æµç¨‹
- ç•¶å‰æ­¥é©Ÿé«˜äº®
- å®Œæˆç‹€æ…‹æŒ‡ç¤º

### 4. ç„¡éšœç¤™åŠŸèƒ½ âœ…

#### é¡è‰²å°æ¯”åº¦
- ç¬¦åˆ WCAG 2.1 AA æ¨™æº–
- å°æ¯”åº¦ â‰¥ 4.5:1

#### è§¸æ§ç›®æ¨™
- æœ€å° 44px è§¸æ§å€åŸŸ
- é©åˆé«˜é½¡ä½¿ç”¨è€…

#### æ–‡å­—ç¸®æ”¾
- æ”¯æ´ 200% æ–‡å­—ç¸®æ”¾
- éŸ¿æ‡‰å¼ä½ˆå±€

---

## ğŸ“ æ–°å¢æª”æ¡ˆ

### 1. æ ¸å¿ƒæ¨¡çµ„
```
xai_flex/m1_enhanced_visualization.py
â”œâ”€â”€ DesignTokens è¨­è¨ˆè®Šæ•¸ç³»çµ±
â”œâ”€â”€ M1ComponentType å…ƒä»¶é¡å‹
â”œâ”€â”€ WarningLevel è­¦è¨Šç­‰ç´š
â”œâ”€â”€ M1Atoms åŸå­å…ƒä»¶åº«
â”œâ”€â”€ M1Molecules åˆ†å­å…ƒä»¶åº«
â”œâ”€â”€ M1Organisms çµ„ç¹”å…ƒä»¶åº«
â””â”€â”€ M1EnhancedVisualizationGenerator ä¸»ç”Ÿæˆå™¨
```

### 2. æ•´åˆæ¨¡çµ„
```
xai_flex/m1_integration.py
â”œâ”€â”€ M1IntegrationManager æ•´åˆç®¡ç†å™¨
â”œâ”€â”€ M1DataAdapter è³‡æ–™é©é…å™¨
â””â”€â”€ èˆ‡ç¾æœ‰ç³»çµ±çš„æ©‹æ¥åŠŸèƒ½
```

### 3. é…ç½®æª”æ¡ˆ
```
config/m1_config.yaml
â”œâ”€â”€ Design Tokens è¨­è¨ˆè®Šæ•¸
â”œâ”€â”€ Component Library å…ƒä»¶åº«é…ç½®
â”œâ”€â”€ XAI é…ç½®
â”œâ”€â”€ ç„¡éšœç¤™é…ç½®
â”œâ”€â”€ äº’å‹•é…ç½®
â””â”€â”€ æ€§èƒ½é…ç½®
```

### 4. æ¸¬è©¦æª”æ¡ˆ
```
test_m1_simple.py
â”œâ”€â”€ è¨­è¨ˆè®Šæ•¸æ¸¬è©¦
â”œâ”€â”€ è¦–è¦ºåŒ–ç”Ÿæˆå™¨æ¸¬è©¦
â”œâ”€â”€ éŒ¯èª¤è™•ç†æ¸¬è©¦
â”œâ”€â”€ ç„¡éšœç¤™åŠŸèƒ½æ¸¬è©¦
â””â”€â”€ ç¯„ä¾‹è¼¸å‡ºç”Ÿæˆ
```

---

## ğŸ¨ è¦–è¦ºåŒ–ç¯„ä¾‹

### å–®ä¸€åˆ†æçµæœ
```json
{
  "type": "flex",
  "altText": "å¤±æ™ºç…§è­·åˆ†æï¼šè¨˜æ†¶åŠ›è¡°é€€æ¨¡å¼ç¬¦åˆè¼•åº¦èªçŸ¥éšœç¤™å¾µå…†",
  "contents": {
    "type": "bubble",
    "size": "mega",
    "header": {
      "type": "box",
      "layout": "vertical",
      "backgroundColor": "#FFFFFF",
      "contents": [
        {
          "type": "text",
          "text": "AI åˆ†æçµæœ",
          "size": "lg",
          "weight": "bold",
          "color": "#212121"
        },
        {
          "type": "text",
          "text": "è¨˜æ†¶åŠ›è©•ä¼°",
          "size": "sm",
          "color": "#666666"
        }
      ]
    },
    "body": {
      "type": "box",
      "layout": "vertical",
      "backgroundColor": "#F5F5F5",
      "contents": [
        // ä¿¡å¿ƒåº¦é‡è¡¨
        // æ¯”å°å¡ç‰‡
        // é—œéµç™¼ç¾
      ]
    },
    "footer": {
      "type": "box",
      "layout": "vertical",
      "backgroundColor": "#FFFFFF",
      "contents": [
        {
          "type": "button",
          "action": {
            "type": "postback",
            "label": "æŸ¥çœ‹è©³ç´°åˆ†æ",
            "data": "m1_detail"
          },
          "style": "primary",
          "height": "44px"
        }
      ]
    }
  }
}
```

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ä½¿ç”¨
```python
from xai_flex.m1_enhanced_visualization import M1EnhancedVisualizationGenerator

# å‰µå»ºç”Ÿæˆå™¨
generator = M1EnhancedVisualizationGenerator()

# æº–å‚™åˆ†æè³‡æ–™
analysis_data = {
    "confidence_score": 0.85,
    "comparison_data": {
        "normal_aging": "å¶çˆ¾å¿˜è¨˜é‘°åŒ™ä½ç½®ï¼Œä½†èƒ½å›æƒ³èµ·ä¾†",
        "dementia_warning": "ç¶“å¸¸å¿˜è¨˜é‡è¦ç´„æœƒï¼Œä¸”ç„¡æ³•å›æƒ³"
    },
    "key_finding": "è¨˜æ†¶åŠ›è¡°é€€æ¨¡å¼ç¬¦åˆè¼•åº¦èªçŸ¥éšœç¤™å¾µå…†",
    "warning_level": "caution"
}

# ç”Ÿæˆ Flex Message
flex_message = generator.generate_m1_flex_message(analysis_data)
```

### 2. æ‰¹æ¬¡è™•ç†
```python
# å¤šé‡åˆ†æçµæœ
multiple_results = [analysis_data1, analysis_data2, analysis_data3]
carousel_message = generator.generate_m1_carousel(multiple_results)
```

### 3. æ•´åˆä½¿ç”¨
```python
from xai_flex.m1_integration import M1IntegrationManager

# å‰µå»ºæ•´åˆç®¡ç†å™¨
integration_manager = M1IntegrationManager()

# è™•ç†åˆ†æ
response = integration_manager.process_m1_analysis(
    user_input="è¨˜æ†¶åŠ›å•é¡Œ",
    analysis_data=analysis_data
)
```

---

## âœ… æ¸¬è©¦çµæœ

### è¨­è¨ˆè®Šæ•¸æ¸¬è©¦
- âœ… é¡è‰²è®Šæ•¸ç³»çµ±
- âœ… å­—é«”è®Šæ•¸ç³»çµ±
- âœ… é–“è·è®Šæ•¸ç³»çµ±

### è¦–è¦ºåŒ–ç”Ÿæˆå™¨æ¸¬è©¦
- âœ… å–®ä¸€åˆ†æçµæœç”Ÿæˆ
- âœ… å¤šé‡åˆ†æè¼ªæ’­ç”Ÿæˆ
- âœ… éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### ç„¡éšœç¤™åŠŸèƒ½æ¸¬è©¦
- âœ… é¡è‰²å°æ¯”åº¦æª¢æŸ¥
- âœ… è§¸æ§ç›®æ¨™å¤§å°æª¢æŸ¥
- âœ… æ–‡å­—ç¸®æ”¾æ”¯æ´

### ç¯„ä¾‹è¼¸å‡º
- âœ… ç”Ÿæˆ `sample_m1_simple_output.json`
- âœ… ç¬¦åˆ LINE Flex Message æ ¼å¼
- âœ… åŒ…å«å®Œæ•´å…ƒæ•¸æ“š

---

## ğŸš€ ä¸»è¦å„ªå‹¢

### 1. è¨­è¨ˆç³»çµ±ä¸€è‡´æ€§
- åŸºæ–¼ M1.fig è¨­è¨ˆæª”è¦æ ¼æ›¸
- çµ±ä¸€çš„è¨­è¨ˆè®Šæ•¸ç³»çµ±
- å¯ç¶­è­·çš„å…ƒä»¶åº«

### 2. XAI è¦–è¦ºåŒ–
- ç›´è§€çš„ä¿¡å¿ƒåº¦é¡¯ç¤º
- æ¸…æ™°çš„æ¯”å°åˆ†æ
- é€æ˜çš„æ¨ç†éç¨‹

### 3. é«˜é½¡å‹å–„è¨­è¨ˆ
- ç¬¦åˆç„¡éšœç¤™æ¨™æº–
- é©åˆè§¸æ§æ“ä½œ
- æ¸…æ™°çš„è¦–è¦ºå±¤æ¬¡

### 4. æ¨¡çµ„åŒ–æ¶æ§‹
- å¯é‡ç”¨çš„å…ƒä»¶
- æ˜“æ–¼æ“´å±•å’Œç¶­è­·
- èˆ‡ç¾æœ‰ç³»çµ±æ•´åˆ

---

## ğŸ“ˆ å¾ŒçºŒå»ºè­°

### 1. é€²ä¸€æ­¥å„ªåŒ–
- æ·»åŠ å‹•ç•«æ•ˆæœ
- æ”¯æ´æ›´å¤šäº’å‹•å…ƒç´ 
- å„ªåŒ–è¼‰å…¥æ€§èƒ½

### 2. æ“´å±•åŠŸèƒ½
- æ”¯æ´æ›´å¤šæ¨¡çµ„ (M2, M3, M4)
- æ·»åŠ å€‹äººåŒ–è¨­å®š
- æ”¯æ´å¤šèªè¨€

### 3. æ¸¬è©¦å®Œå–„
- æ·»åŠ å–®å…ƒæ¸¬è©¦
- è¦–è¦ºå›æ­¸æ¸¬è©¦
- ä½¿ç”¨è€…é«”é©—æ¸¬è©¦

---

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–éœ€è¦é€²ä¸€æ­¥çš„å”åŠ©ï¼Œè«‹åƒè€ƒï¼š
- æ¸¬è©¦æª”æ¡ˆï¼š`test_m1_simple.py`
- ç¯„ä¾‹è¼¸å‡ºï¼š`sample_m1_simple_output.json`
- é…ç½®æª”æ¡ˆï¼š`config/m1_config.yaml`

---

**æ›´æ–°å®Œæˆæ™‚é–“ï¼š** 2025-08-01  
**ç‰ˆæœ¬ï¼š** 1.0.0  
**ç‹€æ…‹ï¼š** âœ… å·²å®Œæˆä¸¦æ¸¬è©¦é€šé 