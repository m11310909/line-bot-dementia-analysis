import json
import os

print("ğŸ”§ å»ºç«‹ M2 ç—…ç¨‹éšæ®µæ¨¡çµ„...")

# ç¢ºä¿ç›®éŒ„å­˜åœ¨
os.makedirs('../data/chunks', exist_ok=True)

# M2 ç—…ç¨‹éšæ®µçŸ¥è­˜ç‰‡æ®µ
m2_chunks = [
    {
        "chunk_id": "M2-01",
        "module_id": "M2",
        "chunk_type": "stage_description",
        "title": "è¼•åº¦å¤±æ™ºç—‡éšæ®µç‰¹å¾µ",
        "content": "æ‚£è€…åœ¨ç†Ÿæ‚‰ç’°å¢ƒä¸­ä»å¯ç¨ç«‹ç”Ÿæ´»ï¼Œä½†åœ¨è¤‡é›œä»»å‹™ä¸Šéœ€è¦å”åŠ©ã€‚èªçŸ¥èƒ½åŠ›æœ‰è¼•å¾®è¨˜æ†¶ç¼ºæï¼Œä¸»è¦å½±éŸ¿è¿‘æœŸè¨˜æ†¶ã€‚æ—¥å¸¸ç”Ÿæ´»åŸºæœ¬æ´»å‹•å¤šæ•¸å¯è‡ªç†ï¼Œä½†è¤‡é›œæ´»å‹•å¦‚ç†è²¡ã€è³¼ç‰©éœ€è¦ç›£ç£ã€‚ç…§è­·é‡é»ï¼šå»ºç«‹è¦å¾‹ä½œæ¯ã€å®‰å…¨ç’°å¢ƒã€èªçŸ¥åˆºæ¿€æ´»å‹•ã€‚",
        "keywords": ["è¼•åº¦", "ç¨ç«‹ç”Ÿæ´»", "è¤‡é›œä»»å‹™", "ç›£ç£", "è¦å¾‹ä½œæ¯"],
        "confidence_score": 0.92,
        "source": "CDRé‡è¡¨èˆ‡ç…§è­·æŒ‡å¼•"
    },
    {
        "chunk_id": "M2-02",
        "module_id": "M2",
        "chunk_type": "stage_description",
        "title": "ä¸­åº¦å¤±æ™ºç—‡éšæ®µç‰¹å¾µ",
        "content": "æ˜é¡¯èªçŸ¥åŠŸèƒ½è¡°é€€ï¼Œæ—¥å¸¸ç”Ÿæ´»éœ€è¦ç›¸ç•¶ç¨‹åº¦å”åŠ©ã€‚è¨˜æ†¶åŠ›é¡¯è‘—ä¸‹é™ï¼Œæ™‚ç©ºæ··äº‚å¸¸è¦‹ã€‚åŸºæœ¬æ´»å‹•éœ€è¦æé†’æˆ–å”åŠ©ï¼Œè¤‡é›œæ´»å‹•ç„¡æ³•ç¨ç«‹å®Œæˆã€‚å¯èƒ½å‡ºç¾éŠèµ°ã€é‡è¤‡è¡Œç‚ºã€ç¡çœ éšœç¤™ã€æƒ…ç·’ä¸ç©©ã€‚éœ€è¦å”åŠ©ç©¿è¡£ã€å®¹æ˜“è¿·è·¯ã€‚",
        "keywords": ["ä¸­åº¦", "èªçŸ¥è¡°é€€", "å”åŠ©", "ç©¿è¡£", "è¿·è·¯", "ç¡çœ éšœç¤™", "éŠèµ°"],
        "confidence_score": 0.90,
        "source": "CDRé‡è¡¨èˆ‡ç…§è­·æŒ‡å¼•"
    },
    {
        "chunk_id": "M2-03",
        "module_id": "M2",
        "chunk_type": "stage_description",
        "title": "é‡åº¦å¤±æ™ºç—‡éšæ®µç‰¹å¾µ",
        "content": "åš´é‡èªçŸ¥åŠŸèƒ½ç¼ºæï¼Œæ—¥å¸¸ç”Ÿæ´»å®Œå…¨ä¾è³´ä»–äººã€‚åš´é‡è¨˜æ†¶å–ªå¤±ï¼Œç„¡æ³•è¾¨è­˜è¦ªäººï¼Œèªè¨€èƒ½åŠ›å¤§å¹…é€€åŒ–ã€‚æ‰€æœ‰åŸºæœ¬æ´»å‹•éœ€è¦å”åŠ©ï¼Œå¯èƒ½å‡ºç¾ååš¥å›°é›£ã€è¡Œå‹•éšœç¤™ã€‚ç…§è­·é‡é»ï¼šå…¨é¢æ€§ç…§è­·ã€èˆ’é©ç…§è­·ã€æ„ŸæŸ“é é˜²ã€‚",
        "keywords": ["é‡åº¦", "å®Œå…¨ä¾è³´", "ç„¡æ³•è¾¨è­˜", "ååš¥å›°é›£", "å…¨é¢ç…§è­·"],
        "confidence_score": 0.88,
        "source": "CDRé‡è¡¨èˆ‡ç…§è­·æŒ‡å¼•"
    },
    {
        "chunk_id": "M2-04",
        "module_id": "M2",
        "chunk_type": "care_guidance",
        "title": "ç—…ç¨‹éšæ®µç…§è­·æŒ‡å¼•",
        "content": "ä¸åŒéšæ®µéœ€è¦ä¸åŒç…§è­·ç­–ç•¥ã€‚è¼•åº¦éšæ®µé‡é»ç¶­æŒç¨ç«‹æ€§ï¼Œä¸­åº¦éšæ®µæ³¨é‡å®‰å…¨èˆ‡è¡Œç‚ºç®¡ç†ï¼Œé‡åº¦éšæ®µè‘—é‡èˆ’é©ç…§è­·ã€‚ç…§è­·è€…æ‡‰äº†è§£å„éšæ®µç‰¹å¾µï¼Œæå‰è¦åŠƒç…§è­·è³‡æºï¼Œä¸¦æ³¨æ„è‡ªèº«èº«å¿ƒå¥åº·ã€‚",
        "keywords": ["ç…§è­·æŒ‡å¼•", "éšæ®µç­–ç•¥", "ç¨ç«‹æ€§", "å®‰å…¨ç®¡ç†", "èˆ’é©ç…§è­·"],
        "confidence_score": 0.85,
        "source": "ç…§è­·æŒ‡å°æ‰‹å†Š"
    }
]

# å„²å­˜ç‚º JSONL æ ¼å¼
output_file = '../data/chunks/m2_stage_chunks.jsonl'
with open(output_file, 'w', encoding='utf-8') as f:
    for chunk in m2_chunks:
        f.write(json.dumps(chunk, ensure_ascii=False) + '\n')

print(f"âœ… æˆåŠŸå»ºç«‹ {len(m2_chunks)} å€‹ M2 çŸ¥è­˜ç‰‡æ®µ")
print(f"ğŸ“ æª”æ¡ˆä½ç½®: {output_file}")

# é©—è­‰æª”æ¡ˆ
if os.path.exists(output_file):
    with open(output_file, 'r', encoding='utf-8') as f:
        lines = f.readlines()
    print(f"ğŸ“Š æª”æ¡ˆé©—è­‰: {len(lines)} è¡Œè³‡æ–™")
    
    # é¡¯ç¤ºç¬¬ä¸€å€‹ chunk
    if lines:
        first_chunk = json.loads(lines[0])
        print(f"ğŸ“‹ ç¬¬ä¸€å€‹ç‰‡æ®µ: {first_chunk['chunk_id']} - {first_chunk['title']}")
else:
    print("âŒ æª”æ¡ˆå»ºç«‹å¤±æ•—")

print(f"\nğŸ¯ M2 æ¨¡çµ„å»ºç«‹å®Œæˆï¼")
