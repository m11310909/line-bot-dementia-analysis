INFO:redis_cache_manager:âœ… Redis é€£æ¥æˆåŠŸ
INFO:redis_cache_manager:âœ… Redis é€£æ¥æˆåŠŸ
INFO:optimized_gemini_client:âœ… Gemini API åˆå§‹åŒ–æˆåŠŸ
/Users/yulincho/Documents/GitHub/line-bot-dementia-analysis/enhanced_m1_m2_m3_integrated_api.py:554: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
INFO:     Started server process [89802]
INFO:     Waiting for application startup.
INFO:redis_cache_manager:âœ… Redis é€£æ¥æˆåŠŸ
INFO:redis_cache_manager:âœ… Redis é€£æ¥æˆåŠŸ
INFO:optimized_gemini_client:âœ… Gemini API åˆå§‹åŒ–æˆåŠŸ
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8005 (Press CTRL+C to quit)
âœ… LINE Bot åˆå§‹åŒ–æˆåŠŸ
ğŸš€ å•Ÿå‹•å¢å¼·ç‰ˆ M1+M2+M3 æ•´åˆå¼•æ“...
ğŸ” æª¢æŸ¥ç’°å¢ƒè®Šæ•¸...
âœ… LINE_CHANNEL_ACCESS_TOKEN å·²è¨­ç½®
âœ… LINE_CHANNEL_SECRET å·²è¨­ç½®
âœ… GEMINI_API_KEY å·²è¨­ç½®
âœ… LINE Bot åˆå§‹åŒ–æˆåŠŸ
âœ… Redis å¿«å–ç®¡ç†å™¨åˆå§‹åŒ–æˆåŠŸ
âœ… å„ªåŒ– Gemini å®¢æˆ¶ç«¯åˆå§‹åŒ–æˆåŠŸ
ğŸš€ åˆå§‹åŒ– M1+M2+M3 æ•´åˆå¼•æ“...
ğŸ“Š è¼‰å…¥ M1 è³‡æ–™...
âœ… M1 è¼‰å…¥ï¼š3 å€‹çŸ¥è­˜ç‰‡æ®µ
ğŸ“Š è¼‰å…¥ M2 è³‡æ–™...
âœ… M2 è¼‰å…¥ï¼š6 å€‹çŸ¥è­˜ç‰‡æ®µ
ğŸ“Š è¼‰å…¥ M3 BPSD è³‡æ–™...
âœ… M3 è¼‰å…¥ï¼š10 å€‹çŸ¥è­˜ç‰‡æ®µ
ğŸ¯ ç¸½è¨ˆè¼‰å…¥ï¼š19 å€‹çŸ¥è­˜ç‰‡æ®µ
ğŸ“‹ æ¨¡çµ„åˆ†å¸ƒï¼šM1(3) + M2(6) + M3(10) = 19
ğŸ” å»ºç«‹æª¢ç´¢ç´¢å¼•...
âœ… è©å½™åº«å»ºç«‹å®Œæˆï¼š248 å€‹è©å½™
âœ… M1+M2+M3 æ•´åˆå¼•æ“åˆå§‹åŒ–å®Œæˆ
âœ… M1+M2+M3 æ•´åˆå¼•æ“åˆå§‹åŒ–æˆåŠŸ
âœ… å¢å¼·ç‰ˆ M1+M2+M3 æ•´åˆ API å•Ÿå‹•æˆåŠŸ
INFO:     127.0.0.1:57090 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57092 - "GET /webhook HTTP/1.1" 200 OK
INFO:     127.0.0.1:57162 - "GET /health HTTP/1.1" 200 OK
INFO:__main__:[DEBUG] /webhook endpoint è¢«å‘¼å«
INFO:__main__:[DEBUG] X-Line-Signature: /3KedyNKns5G56NDxhUBXDDN25RSb7Ef+Iy+YVwRh6g=
INFO:__main__:[DEBUG] webhook body: b'{"destination":"Uba923c75e676b3d8d7cd8e12a7058564","events":[{"type":"message","message":{"type":"text","id":"573290081096565447","quoteToken":"D2ffUYkAfqb2VIoPE_zaQ2ZdKnoNK7ACZjzMcNdz2fII8uWk_2O7Drvr'
INFO:__main__:[DEBUG] handle_message è¢«å‘¼å«
INFO:__main__:[DEBUG] event.message.text: æˆ‘æœ€è¿‘å¸¸å¸¸å¿˜è¨˜äº‹æƒ…
INFO:__main__:[DEBUG] event.source.user_id: Ue08a4e22857f264151c9da02bdefc1eb
INFO:__main__:ğŸ“¨ æ”¶åˆ°ä¾†è‡ª Ue08a4e22857f264151c9da02bdefc1eb çš„è¨Šæ¯: æˆ‘æœ€è¿‘å¸¸å¸¸å¿˜è¨˜äº‹æƒ…
INFO:__main__:[DEBUG] integrated_engine å¯ç”¨ï¼Œé–‹å§‹åˆ†æ...
INFO:__main__:[DEBUG] å¿«å–æœªå‘½ä¸­ï¼Œé€²è¡Œæ–°åˆ†æ
INFO:__main__:[DEBUG] æ–°åˆ†æçµæœå·²å¿«å–
INFO:__main__:[DEBUG] åˆ†æçµæœé¡å‹: <class 'm1_m2_m3_integrated_rag.AnalysisResult'>
INFO:__main__:[DEBUG] å˜—è©¦ç™¼é€è¨Šæ¯ (ç¬¬ 1 æ¬¡)
INFO:__main__:âœ… è¨Šæ¯ç™¼é€æˆåŠŸ
INFO:__main__:âœ… æ–‡å­—è¨Šæ¯ç™¼é€æˆåŠŸ
INFO:__main__:[DEBUG] handler.handle å·²åŸ·è¡Œ
ğŸ§  ç¶œåˆåˆ†æ: æˆ‘æœ€è¿‘å¸¸å¸¸å¿˜è¨˜äº‹æƒ…
ğŸ” æª¢ç´¢æŸ¥è©¢: æˆ‘æœ€è¿‘å¸¸å¸¸å¿˜è¨˜äº‹æƒ…
ğŸ“Š æ‰¾åˆ° 5 å€‹ç›¸é—œç‰‡æ®µ
INFO:     127.0.0.1:53854 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:54447 - "GET /health HTTP/1.1" 200 OK
